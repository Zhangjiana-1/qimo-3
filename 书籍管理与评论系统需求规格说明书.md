# 书籍管理与评论系统需求规格说明书

## 1. 项目概述

### 1.1 项目背景
随着数字化阅读的普及和图书馆管理的现代化需求，设计一款高效、易用的书籍管理与评论系统变得尤为重要。该系统将帮助用户管理个人书籍收藏，发现新书籍，并分享阅读体验。

### 1.2 项目目标
- 提供完整的书籍信息管理功能
- 实现用户注册、登录和权限管理
- 支持书籍评论、评分和互动功能
- 建立友好的用户界面和流畅的交互体验
- 确保系统的安全性、稳定性和可扩展性

### 1.3 技术栈
- 后端：Spring Boot 2.x, Spring MVC, Spring Data JPA
- 数据库：MySQL
- 前端：HTML, CSS, JavaScript, Thymeleaf（采用前后端不分离方式）
- 安全框架：Spring Security
- 构建工具：Maven

## 2. 系统架构

系统采用前后端不分离的架构设计，主要包含以下几层：
- 表现层：使用Thymeleaf模板引擎在服务器端渲染HTML页面，负责用户界面和交互
- 控制层：处理HTTP请求，调用业务层进行逻辑处理，并返回视图或数据
- 业务逻辑层：处理核心业务逻辑，确保业务规则的正确执行
- 数据访问层：负责数据持久化和检索，与数据库进行交互

## 3. 核心功能模块

### 3.1 用户管理模块

#### 3.1.1 用户注册
- 支持邮箱/手机号注册
- 密码强度校验
- 验证码验证
- 用户协议确认

#### 3.1.2 用户登录
- 用户名/密码登录
- 记住密码功能
- 找回密码功能

#### 3.1.3 用户信息管理
- 个人资料修改（头像、昵称、性别等）
- 密码修改
- 绑定手机/邮箱

#### 3.1.4 用户权限管理
- 基于角色的权限控制（普通用户、管理员）
- 权限分配和管理

### 3.2 书籍管理模块

#### 3.2.1 书籍信息管理
- 书籍添加（ISBN自动检索、手动录入）
- 书籍信息编辑（标题、作者、出版社、出版日期等）
- 书籍封面上传
- 书籍分类和标签管理

#### 3.2.2 书籍查询与浏览
- 关键词搜索（书名、作者、ISBN等）
- 多条件筛选（分类、出版社、出版日期等）
- 排序功能（按热度、出版日期、评分等）
- 书籍详情查看

#### 3.2.3 书籍收藏
- 添加到收藏夹

### 3.3 评论管理模块

#### 3.3.1 评论发布
- 对书籍发表评论
- 支持文字、图片评论
- 评分功能

#### 3.3.2 评论互动
- 评论点赞
- 评论回复
- 评论举报

#### 3.3.3 评论管理
- 评论查看与筛选
- 评论删除（用户删除自己评论，管理员删除所有评论）
- 评论审核（管理员功能）

## 4. 非功能性需求

### 4.1 性能要求
- 系统响应时间：页面加载时间小于2秒
- 数据库查询响应时间：小于500毫秒
- 并发处理：支持1000用户同时在线

### 4.2 安全要求
- 用户密码加密存储
- 接口权限验证
- 防止SQL注入、XSS攻击
- 敏感数据加密传输

### 4.3 可用性要求
- 用户界面友好，易于操作
- 提供帮助文档和使用指南
- 系统7×24小时稳定运行

### 4.4 可扩展性要求
- 模块化设计，便于功能扩展
- 支持第三方API集成
- 数据库设计考虑未来数据量增长

## 5. 数据库设计（主要实体）

### 5.1 用户表(users)
- id: 主键
- username: 用户名
- password: 密码
- email: 邮箱
- phone: 手机号
- nickname: 昵称
- avatar: 头像
- role: 角色
- created_at: 创建时间
- updated_at: 更新时间

### 5.2 书籍表(books)
- id: 主键
- isbn: ISBN
- title: 书名
- author: 作者
- publisher: 出版社
- publish_date: 出版日期
- cover_url: 封面URL
- description: 描述
- page_count: 页数
- category_id: 分类ID
- created_at: 创建时间
- updated_at: 更新时间

### 5.3 评论表(comments)
- id: 主键
- user_id: 用户ID
- book_id: 书籍ID
- content: 评论内容
- rating: 评分
- parent_id: 父评论ID（用于回复）
- created_at: 创建时间
- updated_at: 更新时间
- status: 状态（正常、审核中、已删除）

## 6. 页面与控制器设计

系统采用前后端不分离架构，通过Spring MVC控制器直接返回Thymeleaf渲染的视图页面。主要页面包括：

- 首页：展示热门书籍、新书推荐
- 书籍列表页：支持多条件筛选和排序
- 书籍详情页：展示书籍详细信息、评论和评分
- 用户注册/登录页
- 个人中心：管理个人资料、我的收藏、阅读记录
- 评论管理页：用户查看和管理自己的评论
- 管理员后台：用户管理、书籍管理、评论审核等功能

主要控制器包括：

- UserController：处理用户相关请求
- BookController：处理书籍相关请求
- CommentController：处理评论相关请求
- AdminController：处理管理员相关请求

---

# PlantUML用例图

```plantuml
@startuml

left to right direction

actor "普通用户" as User
actor "管理员" as Admin

rectangle "用户管理"
    User --> (用户注册)
    User --> (用户登录)
    User --> (个人资料管理)
    User --> (密码修改)
    Admin --> (用户列表管理)
    Admin --> (用户权限分配)
end rectangle

rectangle "书籍管理"
    User --> (浏览书籍)
    User --> (搜索书籍)
    User --> (查看书籍详情)
    User --> (收藏书籍)
    User --> (标记阅读状态)
    Admin --> (添加书籍)
    Admin --> (编辑书籍信息)
    Admin --> (删除书籍)
    Admin --> (分类管理)
end rectangle

rectangle "评论管理"
    User --> (发表评论)
    User --> (评分)
    User --> (评论点赞)
    User --> (回复评论)
    User --> (删除自己评论)
    Admin --> (查看所有评论)
    Admin --> (删除评论)
    Admin --> (评论审核)
end rectangle

@enduml
```

## 用例图说明

用例图展示了系统中不同角色（普通用户和管理员）与系统功能之间的交互关系：

1. **用户管理**：包含用户注册、登录、个人资料管理等基础功能，管理员还具有用户列表管理和权限分配的特权。

2. **书籍管理**：用户可以浏览、搜索、查看书籍详情以及管理个人的书籍收藏和阅读状态；管理员则负责书籍的CRUD操作和分类管理。

3. **评论管理**：用户可以对书籍发表评论、评分、点赞和回复；管理员拥有评论审核和删除的权限，确保评论内容的合规性。

这个需求规格说明书和用例图为书籍管理与评论系统提供了清晰的设计蓝图，后续可以基于此进行详细的系统设计和代码实现。